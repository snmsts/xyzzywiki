[[tips]]

最新版を[[こちら>http://homepage2.nifty.com/kimagurenixyzzy/my-coloring.html]]に移動しました。

2005-06-19 12:01:47 (日)

括弧の位置とカーソル位置が同一の場合に括弧内の色付けができないバグを修正

2004-11-28 (日) 20:40:56

色情報をファイルに保存するときに、'cl のタグを nil に変換してから保存するように変更しました。これにより以前の my-coloring.l と互換性を持てるようになったので、my-coloring.old は削除しました（この機能が不要な方は 319 行の (coloring-change-tag) を削除してください）。

2004-11-28 (日) 16:04:27

色づけしたテキストのうちタグが nil のものだけを my-coloring.l 中の全ての処理の対象とするように変更（これにより今まで色づけした部分がうまく復元されなくなってしまうので、それがまずいと思われる方は以前の my-coloring.l を my-coloring.old として添付しておきますのでそちらを使用してください（プログラムの内容は変わっていません）。または、色情報が保存されている「元ファイル名＋.col」というファイルを開いてその中の editor::cl を nil に置換すれば新しい my-coloring.l でも色情報が保持されるようになります）。
また、メニューから「保存」を削除して、バッファを保存するときと、バッファを閉じるときにのみ色情報を保存するようにしました。

2004-11-28 (日) 13:11:18

バッファを編集して close-selected-buffer した時に、「いいえ」を選択すると色情報がずれてしまう問題に対応（多分）。また、メニューの「保存」をコメントにしました。

2004-11-28 (日) 02:21:44

HIEさんの colorant.l を参考にさせていただいてm(__)m、色づけと同時に色情報を保存するのをやめて、バッファを閉じるときに保存するように変更しました（after-save 時とメニューから「保存(&S)」を選択した時に保存するのは従来通りです。メニューの「保存(&S)」はほとんど意味がなくなりますが、色づけのタグが nil のものも保存する機能があるので一応残しておきます）。

2004-11-26 (金) 01:10:56

色づけ部分の内側にセレクションを設定した場合に、その部分をコピーしたり括弧で囲むことができないというバグを修正。

----

#ref(my-coloring.l)

この lisp は以前ここに暫定的に掲載させて頂いていたのですが、colorstring.l の作者である山本真二さんの承諾を得ずに掲載するのはまずいのではないかと思い直して一旦削除していました。

しかし、昨日山本真二さんに以下のようなメール（一部抜粋）を返信していただきましたので再び掲載させて頂くことにしました（管理者の方にはたびたびお手数をお掛けしてすみませんです。m(__)m）。

 >そこで山本さんにお伺いしますが、colorstring.l を原型とする lisp を
 > xyzzy wiki（http://xyzzy.s53.xrea.com/wiki/） に掲載させていただいても
 >構いませんでしょうか？
 >  
 >
 はい、ぜんぜん構いません。これに限らず、わたし自身書いたLispのコードは
 私に許可を求めることなく、勝手にコピー・改造その他自由に使って構いません。
 オリジナルが私の書いたものであることを明記する必要もありません。

このlispでは、深江さんのcoloring.l、TKIさんのinsert-brace.lを引用・改悪させていただいています。

掲載を快諾して下さった、深江さん、TKIさん、深江さんが参考にされたコードを書かれたHIEさん、coloring.lの原型となったcolorstring.lを作成された山本真二さんに改めて感謝です。m(__)m

----
-以前公開していた coloring.l に、"下線をつける" などの機能を加えたものを下に置きました。よろしかったら試してみてくださいませ。 -- [[fukae]] &new{2004-11-27 (土) 14:59:55};
-ども。いつもお世話になってます。m(__)m 早速新しい coloring.l に対応して（多分） my-coloring.l を書き換えてみました。 -- [[作った（？）人]] &new{2004-11-27 (土) 17:35:49};
-my-coloring.l では、基本的に色づけと同時に色情報をファイル（元ファイル名＋.col）に書き込みに行っている（paste-coloring-text  と enclose-braces-coloring-string の時だけは *after-save-buffer-hook* に引っ掛けて書き込むようにしています。また、undo するとバッファ上の色情報とファイルに保存されている色情報とがずれることがあるので、一応、メニューの「保存(&S)」は残しています。）ので、追加部分もそのように書き直しました。 -- [[作った（？）人]] &new{2004-11-27 (土) 22:17:19};
-色情報がずれないように，自動保存を試みてみました。私が最近つかってるやつです。→ http://hie.s64.xrea.com/xyzzy/pub/colorant.html -- [[ひえ]] &new{2004-11-28 (日) 00:21:42};
-自分のは メニューから保存した時、色づけのタグを nil から 'cl に変えておき、after-save 時にタグが 'cl なものだけ ファイルに書き込むという方法です。なので my-coloring.l には 'cl というのは不要なかんじでしょうか？ -- [[fukae]] &new{2004-11-28 (日) 01:42:27};
-my-coloring.l では、色づけ時にあらかじめタグを 'cl にしておいて、色づけと同時 または after-save 時にタグが 'cl なものだけファイルに書き込むようにしていました（メニューから「保存(&S)」を選択したときは coloring.l と同様、タグが nil のものも 'cl に変換して書き込んでいます）。しかし、色づけと同時に毎回書き込みに行くのもなんとなく処理が重いような気がするので、HIEさんの colorant.l を参考にさせていただいて、色づけと同時に書き込むのをやめて、バッファを閉じるときに書き込むように変更してみました。 -- [[作った（？）人]] &new{2004-11-28 (日) 02:10:05};
-バッファ削除時に色保存しないと，「ファイルを開く」→「色付け」→「閉じる」とかすると色が保存されないし，色付けの都度保存してしまうと，「バッファ編集」→「色付け」→「バッファを保存しないで閉じる」とかすると色情報がずれてしまいます。なので，after-save 時および delete-buffer 時（ただし，編集内容が保存されなかった場合は除く）が良いのでは，と思いました。さらに，色保存はすべて自動保存に任せて，メニューの「保存」もなくした方が良いかもです。さもないと，「バッファ編集」→「（手動で色を）保存」→「バッファを保存しないで閉じる」とすると，結局ずれてしまうので。私のものもメニューから「色保存」を削除してみました。でも，Bold とかのトグルや，前景色の変更は，とっても素敵ですね。 -- [[ひえ]] &new{2004-11-28 (日) 07:39:21};
-*delete-buffer-hook* に引っ掛けて色情報を保存するようにした場合でも、close-selected-buffer でバッファを閉じると（「いいえ」を選択した場合）色情報がずれてしまうようです（この点まだ未解決）。それと、Bold のトグルや、前景色の変更 などは、深江さんの新しい coloring.l からそのまま引用させていただいただけで、自分では何もしていません。(^_^;; -- [[作った（？）人]] &new{2004-11-28 (日) 10:46:12};
-ダメですねぇ。close-selected-buffer は書き換えるしかなさそうな。(not-modified) の前で自動セーブを OFF にしてみました。 -- [[ひえ]] &new{2004-11-28 (日) 11:47:09};
-どうにか close-selected-buffer 対策ができたような気がします（多分。(^_^;) close-selected-buffer を書き換えています）。また、メニューの「保存」をコメントにしてみました。 -- [[作った（？）人]] &new{2004-11-28 (日) 13:06:28};
-うーん、メニューから保存を完璧にするのは難しそうですね。あと 'cl のかわりに nil を使ってもらった方がやっぱ自然かもです。(^_^; いままで色づけ保存したぶんが色づかなくなってしまうので御迷惑かけてしまいますが。 -- [[fukae]] &new{2004-11-28 (日) 13:55:07};
- my-coloring --  &new{2011-04-13 (水) 10:06:33};
- 色 --  &new{2011-04-13 (水) 10:19:24};

#comment
