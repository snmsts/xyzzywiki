* ed::session-directory, ed::*current-session-file-name*, *buffer-package* [#o8dd8c05]
-ページ:     [[リファレンスにツッコミを入れる]]
-投稿者:     [[anonymous]]
-優先順位:   低
-状態:       完了
-カテゴリー: 新規項目
-投稿日:     2007-02-22 (木) 13:37:51
-バージョン: 

** メッセージ [#lfcf6c68]

 <chapter>
 <title>ed::*current-session-file-name*</title>
 <type>Variable</type>
 <arguments></arguments>
 <package>editor</package>
 <description>
 現在開いているセッションのファイル名が保存されています。
 </description>
 <seealso></seealso>
 <link></link>
 <section>その他</section>
 <file>session.l</file>
 </chapter>
 
 <chapter>
 <title>ed::session-directory</title>
 <type>Function</type>
 <arguments>ed::session-directory</arguments>
 <package>editor</package>
 <description>
 *default-session-directory*を返します。*default-session-directory* がnil
 の場合、もしセッションファイルを開いていたらそのセッションファイルのディ
 レクトリを返します。
 </description>
 <seealso>*default-session-directory*</seealso>
 <seealso>ed::*current-session-file-name*</seealso>
 <link></link>
 <section>その他</section>
 <file>session.l</file>
 </chapter>

ファイルは lispmode.l で良いでしょうか？
 <chapter>
 <title>*buffer-package*</title>
 <type>BufferLocal</type>
 <arguments></arguments>
 <package>editor</package>
 <description>
 ファイルの先頭のパラメータリストの Package で指定したパッケージ名が保
 存されます。
 </description>
 <seealso>*auto-mode-parameter-alist*</seealso>
 <link></link>
 <section>バッファ</section>
 <file>lispmode.l</file>
 </chapter>

----
- どーもです。せっかく書いていただきましたが、この3つは却下します。いずれも内部シンボルで、積極的に利用する理由も思いつきませんので。どうしてもリファレンスで解説しておくべきという場合は、その理由を示してNANRIを説得してください。 -- [[NANRI]] &new{2007-02-23 (金) 01:35:25};
- すみません。よく分からないので教えて欲しいのですが、採用する基準は、内部シンボルで無いか、積極的に利用する理由が思いつく場合ということでいいでしょうか。 --  &new{2007-02-24 (土) 14:28:11};
- それも基準としてはまだまだバッチリあいまいだと思います。そして明文化されたモノは存在しません。ま、おおむねそんな感じなんですかね。読む助けとしてではなく書く助けを指向しているというか… -- [[佐野]] &new{2007-02-24 (土) 16:49:17};
- セッションを開いていることを知るためには何か内部シンボルを使わないといかんと思うのですけどどれが良いでしょうかね。 -- [[佐野]] &new{2007-02-24 (土) 16:54:48};
- 例えば、 ed::*current-session-file-name* は changelogmemo.l で、 ed::*buffer-package* は addref で使われているし、 ed:session-directory は、 lisp のキーワードファイルで 将来的にコメントをつける予定という色で表示されているんですがどうでしょう。 また、ed::*current-session-file-name*　は 現在セッションを開いているかどうかも表すので、結構重要な変数だと思います。  --  &new{2007-02-24 (土) 17:18:44};
- あと難しくても、もう少し基準を明確化する必要が生じているのかもしれません。 「項目をある基準で追加するメリット・デメリットを挙げて、だから現状はこの基準を採用する」とまでできれば言うことありません。たとえ却下されても、その基準にしたがって説明してもらえれば、もっと納得しやすいかと思います。 --  &new{2007-02-24 (土) 17:20:46};
- 私はリファレンスの本文にcommitしていないので限定した範囲で。色付けはインストール時の全てsymbolをリファレンスに入っているか否かで色分けしているだけです。採択基準とは全く無関係です。 -- [[佐野]] &new{2007-02-24 (土) 17:49:44};
- 基準というよりはそれ以前なのですが、exportをしていないsymbolはインターフェイスとして「他所の人に使って欲しい」とは思っていないと受けとるのが普通だと思います。ed::*current-session-file-name*は不用意に書き換えると危険ということもリファレンスにのせることをためらう理由になるかと思います。 -- [[佐野]] &new{2007-02-24 (土) 18:07:58};
- 個人的には、リファレンスを名乗る以上、開発者向けの関数・変数についてはすべて載せる（のを目標とする）べきだと思います。この場合問題になるのはどこまでが開発者向けかという線引きだと思います。特に内部シンボルについては、一部有用だと思われるものもあり、非常に判断が難しそうです。現状のように、投稿されるたびに議論するのも面倒ではありますが一つのあり方かもしれません。ところで、*buffer-package* は外部シンボルではないですか？ -- [[Nomura]] &new{2007-02-24 (土) 18:34:16};
- 外部ッスね。sessionしか見てなかった。(-_-;) -- [[佐野]] &new{2007-02-24 (土) 19:02:31};
- 失礼しました。*buffer-package*は直しました。いちおうgrepはしたんですけど、C++側でexportされていたんですね。 -- [[NANRI]] &new{2007-02-25 (日) 18:01:20};
- 自分が現時点で考えている採用の基準は「外部シンボルであること」です。ただし、例外的に内部シンボルを採用しなければならない場合があるとも考えています。そのときは原則を覆すに足る理由があるはずです。~
あくまで現時点での基準ですので、将来については知りません。自分がメインで管理している間はこの基準だと思っていてください。基準を明確にするための説明をサボっていたのはこちらの落ち度です。その点は申し訳なく思っています。~
内部シンボルを採用しない理由は内部シンボルだからです。佐野さんもおっしゃっていますが、開発者がみだりに使って欲しくないと考えているからexportしていない、すなわち内部シンボルのままということです。内部シンボルを何かに利用する場合はその動作や使われ方を熟知して開発者の意図を壊さないように配慮する必要があります。ソースをよく読んで理解して使う必要があるということです。説明の文書を読んで理解したつもりになっている程度で使われるようでは困ります。~
他のスクリプトで使用されているというのは理由になりませんが、現在セッションを開いているかどうかをあらわすのがed::*current-session-file-name*だけであるならば、検討の余地はあります。リファレンスの説明の中に書いておくべきでしたね。 -- [[NANRI]] &new{2007-02-25 (日) 18:33:43};
- あと、内部シンボルの説明を書いてはいけないと言っているわけではありませんので、誤解のなきようお願いします。書いてWebで公開することには十分意味があると思います。 -- [[NANRI]] &new{2007-02-25 (日) 18:40:39};

#comment
